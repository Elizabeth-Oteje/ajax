<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
     <title>Ajax 1 - Text File</title>
  </head>
  <body>
    <button id="button">Get Text File</button>
   <br> <br>
    <div id="text"></div>
    <script>
        //create event listener
        document.getElementById('button').addEventListener('click', loadText);

        function loadText(){
            // console.log('button clicked')
        //create XHR object
        var xhr = new XMLHttpRequest();
        //OPEN - THREE FUNCTIONS.1.type 2. url/file 3. async (true or false)
        xhr.open('GET', 'sample.txt', true);
            
        console.log('READYSTATE: ', xhr.readyState);

            //OPTIONAL - USED FOR LOADING. readystate will be 3

            xhr.onprogress = function(){
                console.log('READYSTATE: ', xhr.readyState);
            }

            //you can use onload or readystate but you'll have to check the ready status when using onload.
            //here ready state will be 1

            xhr.onload = function(){
            console.log('READYSTATE: ', xhr.readyState);

            if(this.status == 200){
                // console.log(this.responseText);
                document.getElementById('text').innerHTML = this.responseText;
            }   else if(this.status = 404){
                document.getElementById('text').innerHTML = 'Not Found';
            }
        }

        xhr.onerror = function(){
            console.log('Request Error...');
        }

        //ready state will be 4

        // xhr.onreadystatechange = function(){
        //     console.log('READYSTATE: ', xhr.readyState);

        //     if(this.readyState == 4 && this.status == 200){
        //         // console.log(this.responseText)

        //     }
        // }
        // //send request 
        xhr.send();
        }

        //ready state values
        // 0: request not initialized
        // 1; server connection established
        // 2; request recieved
        // 3; processing request
        // 4; request finished and response is ready
    </script>
    
  </body>
</html>


